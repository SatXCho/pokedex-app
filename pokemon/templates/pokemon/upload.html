{% extends 'pokemon/base.html' %}
{% block content %}
<div class="upload-container">
    <h2>Upload Pokemon Data</h2>
    <input type="file" id="jsonFile" accept=".json">
    <button onclick="uploadData()">Upload</button>
    <div id="status"></div>
</div>

<script>
    async function uploadData() {
        const fileInput = document.getElementById('jsonFile');
        const statusDiv = document.getElementById('status');
        const file = fileInput.files[0];

        if (!file) {
            statusDiv.textContent = 'Please select a file';
            return;
        }

        try {
            const data = await file.text();
            const response = await fetch('/api/upload-pokemon/', {
                method: 'POST',
                body: data,
                headers: {
                    'Content-Type': 'application/json',
                }
            });
            const result = await response.json();
            statusDiv.textContent = result.message;
        } catch (error) {
            statusDiv.textContent = 'Error: ' + error.message;
        }
    }
</script>
{% endblock %}